<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<h1 th:text="${siteName}"></h1>

<h2>번호 : [[${post.id}]]</h2>

<h2>제목 : [[${post.title}]]</h2>

<h3>내용</h3>
<div style="white-space: pre-line;">[[${post.content}]]</div>

<script>
    function PostComment__submitWriteForm(form) {
        form.content.value = form.content.value.trim();

        if (form.content.value.length === 0) {
            alert("댓글 내용을 입력해주세요.");
            form.content.focus();
            return;
        }

        if (form.content.value.length < 2 || form.content.value.length > 100 ) {
            alert("댓글 내용은 2자 이상, 100자 이하로 입력해주세요.");
            form.content.focus();
            return;
        }

        form.submit();
    }
</script>
<h2>댓글 작성</h2>
<form onsubmit="PostComment__submitWriteForm(this); return false;" th:action="@{/posts/{id}/comments/write(id=${post.id})}" method="POST">
    <div>
        <label for="content">내용</label>
        <br/>
        <textarea id="content" name="content" rows="5" cols="50"></textarea>
    </div>
    <div>
        <input type="submit" value="작성"/>
    </div>
</form>
<hr>

<h2>댓글</h2>

<ul>
    <li th:each="comment : ${post.comments.reversed}">
        <h3>번호 : <span th:text="${comment.id}">댓글 번호</span></h3>
        <div>작성일 : <span th:text="${#temporals.format(comment.createDate, 'yy.MM.dd HH:mm')}">작성일</span></div>
        <div>수정일 : <span th:text="${#temporals.format(comment.modifyDate, 'yy.MM.dd HH:mm')}">수정일</span></div>
        <div style="white-space: pre-line;" th:text="${comment.content}">댓글 내용</div>
        <div>
            <a th:href="@{/posts/{id}/comments/{commentId}/modify(id=${post.id}, commentId=${comment.id})}">수정</a>
            <a onclick="return confirm('정말로 삭제하시겠습니까')" th:href="@{/posts/{id}/comments/{commentId}/delete(id=${post.id}, commentId=${comment.id})}">삭제</a>
        </div>
        <hr>
    </li>
</ul>
<div>
    <a href=".">글 목록</a>
    <a href="write">글 쓰기</a>
    <a th:href="@{{id}/modify(id=${post.id})}">글 수정</a>
    <!--id에 post.id가 들어감-->
    <!--문자열과 자바 코드를 섞어쓰려면 ||를 써야함-->
</div>
</html>